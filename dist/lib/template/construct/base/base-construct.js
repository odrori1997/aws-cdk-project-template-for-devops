"use strict";
/*
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: MIT-0
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this
 * software and associated documentation files (the "Software"), to deal in the Software
 * without restriction, including without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseConstruct = void 0;
const constructs_1 = require("constructs");
const common_helper_1 = require("../../common/common-helper");
const common_guardian_1 = require("../../common/common-guardian");
class BaseConstruct extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        this.stackConfig = props.stackConfig;
        this.commonProps = props;
        this.projectPrefix = props.projectPrefix;
        this.stackName = props.stackName;
        this.commonHelper = new common_helper_1.CommonHelper({
            construct: this,
            env: this.commonProps.env,
            stackName: this.commonProps.stackName,
            projectPrefix: this.projectPrefix,
            variables: this.commonProps.variables
        });
        this.commonGuardian = new common_guardian_1.CommonGuardian({
            construct: this,
            env: this.commonProps.env,
            stackName: this.commonProps.stackName,
            projectPrefix: this.projectPrefix,
            variables: this.commonProps.variables
        });
    }
    findEnumType(enumType, target) {
        return this.commonHelper.findEnumType(enumType, target);
    }
    exportOutput(key, value) {
        this.commonHelper.exportOutput(key, value);
    }
    putParameter(paramKey, paramValue) {
        return this.commonHelper.putParameter(paramKey, paramValue);
    }
    getParameter(paramKey) {
        return this.commonHelper.getParameter(paramKey);
    }
    putVariable(variableKey, variableValue) {
        this.commonHelper.putVariable(variableKey, variableValue);
    }
    getVariable(variableKey) {
        return this.commonHelper.getVariable(variableKey);
    }
    createS3BucketName(baseName, suffix) {
        return this.commonGuardian.createS3BucketName(baseName, suffix);
    }
    createS3Bucket(baseName, suffix, encryption, versioned) {
        return this.commonGuardian.createS3Bucket(baseName, suffix, encryption, versioned);
    }
    withStackName(baseName, delimiter = '-') {
        return `${this.stackName}${delimiter}${baseName}`;
    }
    withProjectPrefix(baseName, delimiter = '-') {
        return `${this.projectPrefix}${delimiter}${baseName}`;
    }
}
exports.BaseConstruct = BaseConstruct;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1jb25zdHJ1Y3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWIvdGVtcGxhdGUvY29uc3RydWN0L2Jhc2UvYmFzZS1jb25zdHJ1Y3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHOzs7QUFFSCwyQ0FBdUM7QUFJdkMsOERBQXdFO0FBQ3hFLGtFQUE4RTtBQVc5RSxNQUFhLGFBQWMsU0FBUSxzQkFBUztJQVN4QyxZQUFZLEtBQWdCLEVBQUUsRUFBVSxFQUFFLEtBQTJCO1FBQ2pFLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFakIsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQztRQUN6QyxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUM7UUFFakMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLDRCQUFZLENBQUM7WUFDakMsU0FBUyxFQUFFLElBQUk7WUFDZixHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFJO1lBQzFCLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVM7WUFDckMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVM7U0FDeEMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLGdDQUFjLENBQUM7WUFDckMsU0FBUyxFQUFFLElBQUk7WUFDZixHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFJO1lBQzFCLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVM7WUFDckMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLFNBQVMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVM7U0FDeEMsQ0FBQyxDQUFDO0lBRVAsQ0FBQztJQUVELFlBQVksQ0FBbUIsUUFBVyxFQUFFLE1BQWM7UUFDdEQsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVELFlBQVksQ0FBQyxHQUFXLEVBQUUsS0FBYTtRQUNuQyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVELFlBQVksQ0FBQyxRQUFnQixFQUFFLFVBQWtCO1FBQzdDLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFFRCxZQUFZLENBQUMsUUFBZ0I7UUFDekIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsV0FBVyxDQUFDLFdBQW1CLEVBQUUsYUFBcUI7UUFDbEQsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsV0FBVyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFRCxXQUFXLENBQUMsV0FBbUI7UUFDM0IsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsa0JBQWtCLENBQUMsUUFBZ0IsRUFBRSxNQUFnQjtRQUNqRCxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFRCxjQUFjLENBQUMsUUFBZ0IsRUFBRSxNQUFnQixFQUFFLFVBQWdDLEVBQUUsU0FBbUI7UUFDcEcsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN2RixDQUFDO0lBRUQsYUFBYSxDQUFDLFFBQWdCLEVBQUUsU0FBUyxHQUFDLEdBQUc7UUFDekMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxHQUFHLFFBQVEsRUFBRSxDQUFDO0lBQ3RELENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxRQUFnQixFQUFFLFNBQVMsR0FBQyxHQUFHO1FBQzdDLE9BQU8sR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLFNBQVMsR0FBRyxRQUFRLEVBQUUsQ0FBQztJQUMxRCxDQUFDO0NBQ0o7QUExRUQsc0NBMEVDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVC0wXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weSBvZiB0aGlzXG4gKiBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmVcbiAqIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSxcbiAqIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG9cbiAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzby5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsXG4gKiBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQVxuICogUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxuICogSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OXG4gKiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEVcbiAqIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIHMzIGZyb20gJ2F3cy1jZGstbGliL2F3cy1zMydcblxuaW1wb3J0IHsgQ29tbW9uSGVscGVyLCBJQ29tbW9uSGVscGVyIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvbW1vbi1oZWxwZXInXG5pbXBvcnQgeyBDb21tb25HdWFyZGlhbiwgSUNvbW1vbkd1YXJkaWFuIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NvbW1vbi1ndWFyZGlhbidcblxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnN0cnVjdENvbW1vblByb3BzIHtcbiAgICBzdGFja0NvbmZpZzogYW55O1xuICAgIHN0YWNrTmFtZTogc3RyaW5nO1xuICAgIHByb2plY3RQcmVmaXg6IHN0cmluZztcbiAgICBlbnY6IGNkay5FbnZpcm9ubWVudDtcbiAgICB2YXJpYWJsZXM/OiBhbnk7XG59XG5cbmV4cG9ydCBjbGFzcyBCYXNlQ29uc3RydWN0IGV4dGVuZHMgQ29uc3RydWN0IGltcGxlbWVudHMgSUNvbW1vbkhlbHBlciwgSUNvbW1vbkd1YXJkaWFuICB7XG4gICAgcHJvdGVjdGVkIHN0YWNrQ29uZmlnOiBhbnk7XG4gICAgcHJvdGVjdGVkIHByb2plY3RQcmVmaXg6IHN0cmluZztcbiAgICBwcm90ZWN0ZWQgc3RhY2tOYW1lOiBzdHJpbmc7XG4gICAgcHJvdGVjdGVkIGNvbW1vblByb3BzOiBDb25zdHJ1Y3RDb21tb25Qcm9wcztcblxuICAgIHByaXZhdGUgY29tbW9uSGVscGVyOiBJQ29tbW9uSGVscGVyO1xuICAgIHByaXZhdGUgY29tbW9uR3VhcmRpYW46IElDb21tb25HdWFyZGlhbjtcblxuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBDb25zdHJ1Y3RDb21tb25Qcm9wcykge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgICAgIHRoaXMuc3RhY2tDb25maWcgPSBwcm9wcy5zdGFja0NvbmZpZztcbiAgICAgICAgdGhpcy5jb21tb25Qcm9wcyA9IHByb3BzO1xuICAgICAgICB0aGlzLnByb2plY3RQcmVmaXggPSBwcm9wcy5wcm9qZWN0UHJlZml4O1xuICAgICAgICB0aGlzLnN0YWNrTmFtZSA9IHByb3BzLnN0YWNrTmFtZTtcblxuICAgICAgICB0aGlzLmNvbW1vbkhlbHBlciA9IG5ldyBDb21tb25IZWxwZXIoe1xuICAgICAgICAgICAgY29uc3RydWN0OiB0aGlzLFxuICAgICAgICAgICAgZW52OiB0aGlzLmNvbW1vblByb3BzLmVudiEsXG4gICAgICAgICAgICBzdGFja05hbWU6IHRoaXMuY29tbW9uUHJvcHMuc3RhY2tOYW1lLFxuICAgICAgICAgICAgcHJvamVjdFByZWZpeDogdGhpcy5wcm9qZWN0UHJlZml4LFxuICAgICAgICAgICAgdmFyaWFibGVzOiB0aGlzLmNvbW1vblByb3BzLnZhcmlhYmxlc1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbW1vbkd1YXJkaWFuID0gbmV3IENvbW1vbkd1YXJkaWFuKHtcbiAgICAgICAgICAgIGNvbnN0cnVjdDogdGhpcyxcbiAgICAgICAgICAgIGVudjogdGhpcy5jb21tb25Qcm9wcy5lbnYhLFxuICAgICAgICAgICAgc3RhY2tOYW1lOiB0aGlzLmNvbW1vblByb3BzLnN0YWNrTmFtZSxcbiAgICAgICAgICAgIHByb2plY3RQcmVmaXg6IHRoaXMucHJvamVjdFByZWZpeCxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdGhpcy5jb21tb25Qcm9wcy52YXJpYWJsZXNcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmaW5kRW51bVR5cGU8VCBleHRlbmRzIG9iamVjdD4oZW51bVR5cGU6IFQsIHRhcmdldDogc3RyaW5nKTogVFtrZXlvZiBUXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1vbkhlbHBlci5maW5kRW51bVR5cGUoZW51bVR5cGUsIHRhcmdldCk7XG4gICAgfVxuXG4gICAgZXhwb3J0T3V0cHV0KGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY29tbW9uSGVscGVyLmV4cG9ydE91dHB1dChrZXksIHZhbHVlKTtcbiAgICB9XG5cbiAgICBwdXRQYXJhbWV0ZXIocGFyYW1LZXk6IHN0cmluZywgcGFyYW1WYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbW9uSGVscGVyLnB1dFBhcmFtZXRlcihwYXJhbUtleSwgcGFyYW1WYWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0UGFyYW1ldGVyKHBhcmFtS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tb25IZWxwZXIuZ2V0UGFyYW1ldGVyKHBhcmFtS2V5KTtcbiAgICB9XG5cbiAgICBwdXRWYXJpYWJsZSh2YXJpYWJsZUtleTogc3RyaW5nLCB2YXJpYWJsZVZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jb21tb25IZWxwZXIucHV0VmFyaWFibGUodmFyaWFibGVLZXksIHZhcmlhYmxlVmFsdWUpO1xuICAgIH1cblxuICAgIGdldFZhcmlhYmxlKHZhcmlhYmxlS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tb25IZWxwZXIuZ2V0VmFyaWFibGUodmFyaWFibGVLZXkpO1xuICAgIH1cblxuICAgIGNyZWF0ZVMzQnVja2V0TmFtZShiYXNlTmFtZTogc3RyaW5nLCBzdWZmaXg/OiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbW9uR3VhcmRpYW4uY3JlYXRlUzNCdWNrZXROYW1lKGJhc2VOYW1lLCBzdWZmaXgpO1xuICAgIH1cblxuICAgIGNyZWF0ZVMzQnVja2V0KGJhc2VOYW1lOiBzdHJpbmcsIHN1ZmZpeD86IGJvb2xlYW4sIGVuY3J5cHRpb24/OiBzMy5CdWNrZXRFbmNyeXB0aW9uLCB2ZXJzaW9uZWQ/OiBib29sZWFuKTogczMuQnVja2V0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbW9uR3VhcmRpYW4uY3JlYXRlUzNCdWNrZXQoYmFzZU5hbWUsIHN1ZmZpeCwgZW5jcnlwdGlvbiwgdmVyc2lvbmVkKTtcbiAgICB9XG5cbiAgICB3aXRoU3RhY2tOYW1lKGJhc2VOYW1lOiBzdHJpbmcsIGRlbGltaXRlcj0nLScpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5zdGFja05hbWV9JHtkZWxpbWl0ZXJ9JHtiYXNlTmFtZX1gO1xuICAgIH1cblxuICAgIHdpdGhQcm9qZWN0UHJlZml4KGJhc2VOYW1lOiBzdHJpbmcsIGRlbGltaXRlcj0nLScpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5wcm9qZWN0UHJlZml4fSR7ZGVsaW1pdGVyfSR7YmFzZU5hbWV9YDtcbiAgICB9XG59ICJdfQ==