"use strict";
/*
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: MIT-0
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this
 * software and associated documentation files (the "Software"), to deal in the Software
 * without restriction, including without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseConstruct = void 0;
const constructs_1 = require("constructs");
const common_helper_1 = require("../../common/common-helper");
const common_guardian_1 = require("../../common/common-guardian");
class BaseConstruct extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        this.stackConfig = props.stackConfig;
        this.commonProps = props;
        this.projectPrefix = props.projectPrefix;
        this.stackName = props.stackName;
        this.commonHelper = new common_helper_1.CommonHelper({
            construct: this,
            env: this.commonProps.env,
            stackName: this.commonProps.stackName,
            projectPrefix: this.projectPrefix,
            variables: this.commonProps.variables
        });
        this.commonGuardian = new common_guardian_1.CommonGuardian({
            construct: this,
            env: this.commonProps.env,
            stackName: this.commonProps.stackName,
            projectPrefix: this.projectPrefix,
            variables: this.commonProps.variables
        });
    }
    findEnumType(enumType, target) {
        return this.commonHelper.findEnumType(enumType, target);
    }
    exportOutput(key, value) {
        this.commonHelper.exportOutput(key, value);
    }
    putParameter(paramKey, paramValue) {
        return this.commonHelper.putParameter(paramKey, paramValue);
    }
    getParameter(paramKey) {
        return this.commonHelper.getParameter(paramKey);
    }
    putVariable(variableKey, variableValue) {
        this.commonHelper.putVariable(variableKey, variableValue);
    }
    getVariable(variableKey) {
        return this.commonHelper.getVariable(variableKey);
    }
    createS3BucketName(baseName, suffix) {
        return this.commonGuardian.createS3BucketName(baseName, suffix);
    }
    createS3Bucket(baseName, suffix, encryption, versioned) {
        return this.commonGuardian.createS3Bucket(baseName, suffix, encryption, versioned);
    }
    withStackName(baseName, delimiter = '-') {
        return `${this.stackName}${delimiter}${baseName}`;
    }
    withProjectPrefix(baseName, delimiter = '-') {
        return `${this.projectPrefix}${delimiter}${baseName}`;
    }
}
exports.BaseConstruct = BaseConstruct;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1jb25zdHJ1Y3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiYXNlLWNvbnN0cnVjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQkc7OztBQUVILDJDQUF1QztBQUl2Qyw4REFBd0U7QUFDeEUsa0VBQThFO0FBVzlFLE1BQWEsYUFBYyxTQUFRLHNCQUFTO0lBU3hDLFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBMkI7UUFDakUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVqQixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUM7UUFDckMsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQztRQUVqQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksNEJBQVksQ0FBQztZQUNqQyxTQUFTLEVBQUUsSUFBSTtZQUNmLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUk7WUFDMUIsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUztZQUNyQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUztTQUN4QyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksZ0NBQWMsQ0FBQztZQUNyQyxTQUFTLEVBQUUsSUFBSTtZQUNmLEdBQUcsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUk7WUFDMUIsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUztZQUNyQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUztTQUN4QyxDQUFDLENBQUM7SUFFUCxDQUFDO0lBRUQsWUFBWSxDQUFtQixRQUFXLEVBQUUsTUFBYztRQUN0RCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsWUFBWSxDQUFDLEdBQVcsRUFBRSxLQUFhO1FBQ25DLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQsWUFBWSxDQUFDLFFBQWdCLEVBQUUsVUFBa0I7UUFDN0MsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVELFlBQVksQ0FBQyxRQUFnQjtRQUN6QixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFRCxXQUFXLENBQUMsV0FBbUIsRUFBRSxhQUFxQjtRQUNsRCxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUVELFdBQVcsQ0FBQyxXQUFtQjtRQUMzQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxRQUFnQixFQUFFLE1BQWdCO1FBQ2pELE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDcEUsQ0FBQztJQUVELGNBQWMsQ0FBQyxRQUFnQixFQUFFLE1BQWdCLEVBQUUsVUFBZ0MsRUFBRSxTQUFtQjtRQUNwRyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZGLENBQUM7SUFFRCxhQUFhLENBQUMsUUFBZ0IsRUFBRSxTQUFTLEdBQUMsR0FBRztRQUN6QyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLEdBQUcsUUFBUSxFQUFFLENBQUM7SUFDdEQsQ0FBQztJQUVELGlCQUFpQixDQUFDLFFBQWdCLEVBQUUsU0FBUyxHQUFDLEdBQUc7UUFDN0MsT0FBTyxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsU0FBUyxHQUFHLFFBQVEsRUFBRSxDQUFDO0lBQzFELENBQUM7Q0FDSjtBQTFFRCxzQ0EwRUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlULTBcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXNcbiAqIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZVxuICogd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LFxuICogbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IgSU1QTElFRCxcbiAqIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBXG4gKiBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXG4gKiBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbiAqIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRVxuICogU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSAnY29uc3RydWN0cyc7XG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0ICogYXMgczMgZnJvbSAnYXdzLWNkay1saWIvYXdzLXMzJ1xuXG5pbXBvcnQgeyBDb21tb25IZWxwZXIsIElDb21tb25IZWxwZXIgfSBmcm9tICcuLi8uLi9jb21tb24vY29tbW9uLWhlbHBlcidcbmltcG9ydCB7IENvbW1vbkd1YXJkaWFuLCBJQ29tbW9uR3VhcmRpYW4gfSBmcm9tICcuLi8uLi9jb21tb24vY29tbW9uLWd1YXJkaWFuJ1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uc3RydWN0Q29tbW9uUHJvcHMge1xuICAgIHN0YWNrQ29uZmlnOiBhbnk7XG4gICAgc3RhY2tOYW1lOiBzdHJpbmc7XG4gICAgcHJvamVjdFByZWZpeDogc3RyaW5nO1xuICAgIGVudjogY2RrLkVudmlyb25tZW50O1xuICAgIHZhcmlhYmxlcz86IGFueTtcbn1cblxuZXhwb3J0IGNsYXNzIEJhc2VDb25zdHJ1Y3QgZXh0ZW5kcyBDb25zdHJ1Y3QgaW1wbGVtZW50cyBJQ29tbW9uSGVscGVyLCBJQ29tbW9uR3VhcmRpYW4gIHtcbiAgICBwcm90ZWN0ZWQgc3RhY2tDb25maWc6IGFueTtcbiAgICBwcm90ZWN0ZWQgcHJvamVjdFByZWZpeDogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBzdGFja05hbWU6IHN0cmluZztcbiAgICBwcm90ZWN0ZWQgY29tbW9uUHJvcHM6IENvbnN0cnVjdENvbW1vblByb3BzO1xuXG4gICAgcHJpdmF0ZSBjb21tb25IZWxwZXI6IElDb21tb25IZWxwZXI7XG4gICAgcHJpdmF0ZSBjb21tb25HdWFyZGlhbjogSUNvbW1vbkd1YXJkaWFuO1xuXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IENvbnN0cnVjdENvbW1vblByb3BzKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCk7XG5cbiAgICAgICAgdGhpcy5zdGFja0NvbmZpZyA9IHByb3BzLnN0YWNrQ29uZmlnO1xuICAgICAgICB0aGlzLmNvbW1vblByb3BzID0gcHJvcHM7XG4gICAgICAgIHRoaXMucHJvamVjdFByZWZpeCA9IHByb3BzLnByb2plY3RQcmVmaXg7XG4gICAgICAgIHRoaXMuc3RhY2tOYW1lID0gcHJvcHMuc3RhY2tOYW1lO1xuXG4gICAgICAgIHRoaXMuY29tbW9uSGVscGVyID0gbmV3IENvbW1vbkhlbHBlcih7XG4gICAgICAgICAgICBjb25zdHJ1Y3Q6IHRoaXMsXG4gICAgICAgICAgICBlbnY6IHRoaXMuY29tbW9uUHJvcHMuZW52ISxcbiAgICAgICAgICAgIHN0YWNrTmFtZTogdGhpcy5jb21tb25Qcm9wcy5zdGFja05hbWUsXG4gICAgICAgICAgICBwcm9qZWN0UHJlZml4OiB0aGlzLnByb2plY3RQcmVmaXgsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMuY29tbW9uUHJvcHMudmFyaWFibGVzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29tbW9uR3VhcmRpYW4gPSBuZXcgQ29tbW9uR3VhcmRpYW4oe1xuICAgICAgICAgICAgY29uc3RydWN0OiB0aGlzLFxuICAgICAgICAgICAgZW52OiB0aGlzLmNvbW1vblByb3BzLmVudiEsXG4gICAgICAgICAgICBzdGFja05hbWU6IHRoaXMuY29tbW9uUHJvcHMuc3RhY2tOYW1lLFxuICAgICAgICAgICAgcHJvamVjdFByZWZpeDogdGhpcy5wcm9qZWN0UHJlZml4LFxuICAgICAgICAgICAgdmFyaWFibGVzOiB0aGlzLmNvbW1vblByb3BzLnZhcmlhYmxlc1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIGZpbmRFbnVtVHlwZTxUIGV4dGVuZHMgb2JqZWN0PihlbnVtVHlwZTogVCwgdGFyZ2V0OiBzdHJpbmcpOiBUW2tleW9mIFRdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbW9uSGVscGVyLmZpbmRFbnVtVHlwZShlbnVtVHlwZSwgdGFyZ2V0KTtcbiAgICB9XG5cbiAgICBleHBvcnRPdXRwdXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jb21tb25IZWxwZXIuZXhwb3J0T3V0cHV0KGtleSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHB1dFBhcmFtZXRlcihwYXJhbUtleTogc3RyaW5nLCBwYXJhbVZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tb25IZWxwZXIucHV0UGFyYW1ldGVyKHBhcmFtS2V5LCBwYXJhbVZhbHVlKTtcbiAgICB9XG5cbiAgICBnZXRQYXJhbWV0ZXIocGFyYW1LZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1vbkhlbHBlci5nZXRQYXJhbWV0ZXIocGFyYW1LZXkpO1xuICAgIH1cblxuICAgIHB1dFZhcmlhYmxlKHZhcmlhYmxlS2V5OiBzdHJpbmcsIHZhcmlhYmxlVmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmNvbW1vbkhlbHBlci5wdXRWYXJpYWJsZSh2YXJpYWJsZUtleSwgdmFyaWFibGVWYWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0VmFyaWFibGUodmFyaWFibGVLZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1vbkhlbHBlci5nZXRWYXJpYWJsZSh2YXJpYWJsZUtleSk7XG4gICAgfVxuXG4gICAgY3JlYXRlUzNCdWNrZXROYW1lKGJhc2VOYW1lOiBzdHJpbmcsIHN1ZmZpeD86IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tb25HdWFyZGlhbi5jcmVhdGVTM0J1Y2tldE5hbWUoYmFzZU5hbWUsIHN1ZmZpeCk7XG4gICAgfVxuXG4gICAgY3JlYXRlUzNCdWNrZXQoYmFzZU5hbWU6IHN0cmluZywgc3VmZml4PzogYm9vbGVhbiwgZW5jcnlwdGlvbj86IHMzLkJ1Y2tldEVuY3J5cHRpb24sIHZlcnNpb25lZD86IGJvb2xlYW4pOiBzMy5CdWNrZXQge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tb25HdWFyZGlhbi5jcmVhdGVTM0J1Y2tldChiYXNlTmFtZSwgc3VmZml4LCBlbmNyeXB0aW9uLCB2ZXJzaW9uZWQpO1xuICAgIH1cblxuICAgIHdpdGhTdGFja05hbWUoYmFzZU5hbWU6IHN0cmluZywgZGVsaW1pdGVyPSctJyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnN0YWNrTmFtZX0ke2RlbGltaXRlcn0ke2Jhc2VOYW1lfWA7XG4gICAgfVxuXG4gICAgd2l0aFByb2plY3RQcmVmaXgoYmFzZU5hbWU6IHN0cmluZywgZGVsaW1pdGVyPSctJyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnByb2plY3RQcmVmaXh9JHtkZWxpbWl0ZXJ9JHtiYXNlTmFtZX1gO1xuICAgIH1cbn0gIl19